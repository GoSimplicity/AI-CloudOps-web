{
  "openapi": "3.0.0",
  "info": {
    "title": "Prediction API",
    "description": "预测服务相关API",
    "version": "1.0.0"
  },
  "paths": {
    "/api/v1/predict/record/list": {
      "get": {
        "tags": [
          "api_v1",
          "prediction"
        ],
        "summary": "List Prediction Records",
        "description": "列出预测记录（分页+过滤）。\n\n仅保留查询能力以满足运营查看场景；创建/更新接口已按规划移除。",
        "operationId": "list_prediction_records_api_v1_predict_record_list_get",
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "default": 1,
              "title": "Page"
            }
          },
          {
            "name": "size",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "default": 20,
              "title": "Size"
            }
          },
          {
            "name": "metric",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Metric"
            }
          },
          {
            "name": "model_version",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Model Version"
            }
          },
          {
            "name": "prediction_type",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Prediction Type"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true,
                  "title": "Response List Prediction Records Api V1 Predict Record List Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/predict/record/detail/{record_id}": {
      "get": {
        "tags": [
          "api_v1",
          "prediction"
        ],
        "summary": "Get Prediction Record",
        "description": "获取预测记录详情。",
        "operationId": "get_prediction_record_api_v1_predict_record_detail__record_id__get",
        "parameters": [
          {
            "name": "record_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Record Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true,
                  "title": "Response Get Prediction Record Api V1 Predict Record Detail  Record Id  Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/predict/record/delete/{record_id}": {
      "delete": {
        "tags": [
          "api_v1",
          "prediction"
        ],
        "summary": "Delete Prediction Record",
        "operationId": "delete_prediction_record_api_v1_predict_record_delete__record_id__delete",
        "parameters": [
          {
            "name": "record_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Record Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true,
                  "title": "Response Delete Prediction Record Api V1 Predict Record Delete  Record Id  Delete"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/predict/model/refresh": {
      "post": {
        "tags": [
          "api_v1",
          "prediction"
        ],
        "summary": "Refresh Model",
        "description": "刷新（重新加载）预测模型。\n\n为什么：按规划提供标准化的模型刷新入口，便于运维在热更新模型文件后无重启生效。",
        "operationId": "refresh_model_api_v1_predict_model_refresh_post",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": true,
                  "type": "object",
                  "title": "Response Refresh Model Api V1 Predict Model Refresh Post"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/predict/model/list": {
      "get": {
        "tags": [
          "api_v1",
          "prediction"
        ],
        "summary": "List Models",
        "description": "列出可用模型与当前加载状态。\n\n简化实现：基于 `ModelLoader.models` 注册表提供可用类型，同时返回当前加载器元数据。",
        "operationId": "list_models_api_v1_predict_model_list_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": true,
                  "type": "object",
                  "title": "Response List Models Api V1 Predict Model List Get"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/predict/model/detail/{model_id}": {
      "get": {
        "tags": [
          "api_v1",
          "prediction"
        ],
        "summary": "Model Detail",
        "description": "获取指定模型的详情（占位实现）。\n\n为什么：按规划提供模型详情入口；由于未引入多模型切换，这里返回默认配置与注册表信息。",
        "operationId": "model_detail_api_v1_predict_model_detail__model_id__get",
        "parameters": [
          {
            "name": "model_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Model Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true,
                  "title": "Response Model Detail Api V1 Predict Model Detail  Model Id  Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/predict/reinitialize": {
      "post": {
        "tags": [
          "api_v1",
          "prediction"
        ],
        "summary": "Reinitialize Service",
        "description": "重新初始化预测服务。\n\n为什么：提供与刷新不同层级的重置能力（包括内部状态），但为简单与可维护，复用 reload 实现。",
        "operationId": "reinitialize_service_api_v1_predict_reinitialize_post",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": true,
                  "type": "object",
                  "title": "Response Reinitialize Service Api V1 Predict Reinitialize Post"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/predict/health": {
      "get": {
        "tags": [
          "api_v1",
          "prediction"
        ],
        "summary": "Predict Health",
        "description": "预测服务健康检查。",
        "operationId": "predict_health_api_v1_predict_health_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": true,
                  "type": "object",
                  "title": "Response Predict Health Api V1 Predict Health Get"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/predict/trend/list": {
      "get": {
        "tags": [
          "api_v1",
          "prediction"
        ],
        "summary": "Trend List",
        "description": "获取趋势预测列表（按请求参数即时生成并缓存）。\n\n设计动机：\n- 规划仅要求 list/detail，无需持久化；\n- 为便于 detail 查询，这里将本次生成结果以ID缓存至内存。",
        "operationId": "trend_list_api_v1_predict_trend_list_get",
        "parameters": [
          {
            "name": "hours_ahead",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 24,
              "title": "Hours Ahead"
            }
          },
          {
            "name": "current_qps",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "number"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Current Qps"
            }
          },
          {
            "name": "use_prom",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": false,
              "title": "Use Prom"
            }
          },
          {
            "name": "metric",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Metric"
            }
          },
          {
            "name": "selector",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Selector"
            }
          },
          {
            "name": "window",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "default": "1m",
              "title": "Window"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true,
                  "title": "Response Trend List Api V1 Predict Trend List Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/predict/trend/detail/{trend_id}": {
      "get": {
        "tags": [
          "api_v1",
          "prediction"
        ],
        "summary": "Trend Detail",
        "description": "获取趋势预测详情。",
        "operationId": "trend_detail_api_v1_predict_trend_detail__trend_id__get",
        "parameters": [
          {
            "name": "trend_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Trend Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true,
                  "title": "Response Trend Detail Api V1 Predict Trend Detail  Trend Id  Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "HTTPValidationError": {
        "properties": {
          "detail": {
            "items": {
              "$ref": "#/components/schemas/ValidationError"
            },
            "type": "array",
            "title": "Detail"
          }
        },
        "type": "object",
        "title": "HTTPValidationError"
      },
      "ValidationError": {
        "properties": {
          "loc": {
            "items": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "integer"
                }
              ]
            },
            "type": "array",
            "title": "Location"
          },
          "msg": {
            "type": "string",
            "title": "Message"
          },
          "type": {
            "type": "string",
            "title": "Error Type"
          }
        },
        "type": "object",
        "required": [
          "loc",
          "msg",
          "type"
        ],
        "title": "ValidationError"
      }
    }
  }
}
